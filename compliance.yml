pool: VSEngSS-MicroBuild2022-1ES

variables:
  solution: '**/*.sln'
  buildPlatform: 'Any CPU'
  buildConfiguration: 'Release'
  CodeQL.Enabled: true

schedules:
- cron: '0 0 */28 * *'
  displayName: 'Run every 28 days at 12:00 a.m.'
  branches:
    include: 
    - main

steps:
- task: CodeQL3000Init@0

- task: NuGetCommand@2
  inputs:
    command: 'restore'

- task: VSBuild@1
  inputs:
    solution: '$(solution)'
    maximumCpuCount: true
    platform: '$(buildPlatform)'
    configuration: $(buildConfiguration)'

- task: CodeQL3000Finalize@0